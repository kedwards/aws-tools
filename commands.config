# AWS SSM Commands Configuration
# Format: COMMAND_NAME|Description|Command to execute
# Lines starting with # are comments and will be ignored

setup-ssm-user|Setup current user with SSH key and sudo access|USERNAME=$(whoami); if [ -f ~/.ssh/id_ed25519.pub ]; then SSH_KEY='$(cat ~/.ssh/id_ed25519.pub)'; elif [ -f ~/.ssh/id_rsa.pub ]; then SSH_KEY='$(cat ~/.ssh/id_rsa.pub)'; else echo 'Error: No SSH public key found (id_ed25519.pub or id_rsa.pub)' >&2; exit 1; fi; if ! id \$USERNAME &>/dev/null; then useradd -m -s /bin/bash \$USERNAME && echo User \$USERNAME created; else echo User \$USERNAME already exists; fi; mkdir -p /home/\$USERNAME/.ssh && chmod 700 /home/\$USERNAME/.ssh && echo \$SSH_KEY > /home/\$USERNAME/.ssh/authorized_keys && chmod 600 /home/\$USERNAME/.ssh/authorized_keys && chown -R \$USERNAME:\$USERNAME /home/\$USERNAME/.ssh && printf '%s ALL=(ALL) NOPASSWD: ALL\n' \$USERNAME > /etc/sudoers.d/user_temp_access && chmod 440 /etc/sudoers.d/user_temp_access && echo Setup complete for user \$USERNAME with sudo access
remove-ssm-user|Remove current user and cleanup sudo access|USERNAME=$(whoami); if id \$USERNAME &>/dev/null; then pkill -u \$USERNAME || true; userdel -r \$USERNAME && echo User \$USERNAME and home directory removed; else echo User \$USERNAME does not exist; fi; if [ -f /etc/sudoers.d/user_temp_access ]; then rm -f /etc/sudoers.d/user_temp_access && echo Sudoers file removed; else echo Sudoers file does not exist; fi; echo Cleanup complete for user \$USERNAME
setup-efs-browse|Setup python browser for web SFTP|cd /efs/reports/outbound/x3exports/outgoing; wget -O main.py https://raw.githubusercontent.com/kedwards/python-file-browser/refs/heads/main/main.py; chmod +x main.py; python3 main.py && rm main.py
remove-efs-browse|Remove python browser used for web SFTP|rm -r /efs/reports/outbound/x3exports/outgoing/main.py
disk-usage|Check disk usage|df -h
memory-info|Display memory information|free -h
system-uptime|Show system uptime|uptime
docker-status|Check Docker containers status|docker ps -a
restart-service|Restart nginx service|systemctl restart nginx && systemctl status nginx
